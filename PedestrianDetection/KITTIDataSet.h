#pragma once
#include "DataSet.h"
#include <string>

#if defined(WIN32) || defined(_WIN32) 
#define PATH_SEPARATOR "\\" 
#else 
#define PATH_SEPARATOR "/" 
#endif 


class KITTIDataSet :
	public DataSet
{

private:
	std::string folderPath;


   std::vector<std::pair<float, float>> validdepthrange = {
		std::pair<float,float>(84.0376465574769,168.075293114954),
		std::pair<float,float>(76.4613104246493,152.922620849299),
		std::pair<float,float>(70.0518904565711,140.103780913142),
		std::pair<float,float>(64.553192444865,129.10638488973),
		std::pair<float,float>(59.7796454674099,119.55929093482),
		std::pair<float,float>(55.5934017738691,111.186803547738),
		std::pair<float,float>(51.8898352205527,103.779670441105),
		std::pair<float,float>(48.5880434416033,97.1760868832067),
		std::pair<float,float>(45.6244441717758,91.2488883435517),
		std::pair<float,float>(42.9483473688743,85.8966947377486),
		std::pair<float,float>(40.51882488401,81.0376497680201),
		std::pair<float,float>(38.3024535667323,687.33),
		std::pair<float,float>(36.271659350076,389.699709815525),
		std::pair<float,float>(34.4034830334045,280.647527482116),
		std::pair<float,float>(32.6786472260521,222.853217241218),
		std::pair<float,float>(31.0808418250414,186.669002921722),
		std::pair<float,float>(29.5961703840282,161.720413457619),
		std::pair<float,float>(28.2127165123207,143.396196929013),
		std::pair<float,float>(26.9202009125291,129.321903385043),
		std::pair<float,float>(25.7097076301639,118.145341461596),
		std::pair<float,float>(24.5734637007498,109.037646557477),
		std::pair<float,float>(23.5046603882448,101.461310424649),
		std::pair<float,float>(22.4973071071001,95.0518904565711),
		std::pair<float,float>(21.5461112407625,89.553192444865),
		std::pair<float,float>(20.6463786374644,84.7796454674099),
		std::pair<float,float>(19.793930735385,80.5934017738691),
		std::pair<float,float>(18.9850351523641,76.8898352205527),
		std::pair<float,float>(18.2163472470927,73.5880434416033),
		std::pair<float,float>(17.4848606738972,70.6244441717758),
		std::pair<float,float>(16.7878653514707,67.9483473688743),
		std::pair<float,float>(16.1229115759785,65.51882488401),
		std::pair<float,float>(15.4877792520893,63.3024535667323),
		std::pair<float,float>(14.880451407355,61.271659350076),
		std::pair<float,float>(14.2990913077342,59.4034830334045),
		std::pair<float,float>(13.7420226137692,57.6786472260521),
		std::pair<float,float>(13.2077121146994,56.0808418250414),
		std::pair<float,float>(12.694754656755,54.5961703840282),
		std::pair<float,float>(12.2018599459631,53.2127165123207),
		std::pair<float,float>(11.7278409580688,51.9202009125291),
		std::pair<float,float>(11.2716037310084,50.7097076301639),
		std::pair<float,float>(10.8321383506169,49.5734637007498),
		std::pair<float,float>(10.4085109693877,48.5046603882448),
		std::pair<float,float>(9.99985672227603,47.4973071071001),
		std::pair<float,float>(9.60537342367572,46.5461112407625),
		std::pair<float,float>(9.22431594653822,45.6463786374644),
		std::pair<float,float>(8.85599119873157,44.793930735385),
		std::pair<float,float>(8.4997536236337,43.9850351523641),
		std::pair<float,float>(8.15500116200467,43.2163472470927),
		std::pair<float,float>(7.82117162069908,42.4848606738972),
		std::pair<float,float>(7.49773940101986,41.7878653514707),
		std::pair<float,float>(7.18421254568661,41.1229115759785),
		std::pair<float,float>(6.88013006866817,40.4877792520893),
		std::pair<float,float>(6.58505953665406,39.880451407355),
		std::pair<float,float>(6.29859487482675,39.2990913077342),
		std::pair<float,float>(6.020354372949,38.7420226137692),
		std::pair<float,float>(5.74997887067476,38.2077121146994),
		std::pair<float,float>(5.48713010349964,37.694754656755),
		std::pair<float,float>(5.23148919294243,37.2018599459631),
		std::pair<float,float>(4.98275526644262,36.7278409580688),
		std::pair<float,float>(4.74064419410863,36.2716037310084),
		std::pair<float,float>(4.50488743089356,35.8321383506169),
		std::pair<float,float>(4.27523095403695,35.4085109693877),
		std::pair<float,float>(4.05143428671854,34.999856722276),
		std::pair<float,float>(3.83326959984258,34.6053734236757),
		std::pair<float,float>(3.62052088472797,34.2243159465382),
		std::pair<float,float>(3.41298319023512,33.8559911987316),
		std::pair<float,float>(3.21046191852794,33.4997536236337),
		std::pair<float,float>(3.0127721742608,33.1550011620047),
		std::pair<float,float>(2.8197381625034,32.8211716206991),
		std::pair<float,float>(2.63119263118261,32.4977394010199),
		std::pair<float,float>(2.44697635423398,32.1842125456866),
		std::pair<float,float>(2.26693765202373,31.8801300686682),
		std::pair<float,float>(2.09093194593193,31.5850595366541),
		std::pair<float,float>(1.91882134428043,31.2985948748267),
		std::pair<float,float>(1.7504742570528,31.020354372949),
		std::pair<float,float>(1.58576503708855,30.7499788706748),
		std::pair<float,float>(1.42457364564578,30.4871301034996),
		std::pair<float,float>(1.26678534041562,30.2314891929424),
		std::pair<float,float>(1.11229038424316,29.9827552664426),
		std::pair<float,float>(0.960983772963168,29.7406441941086),
		std::pair<float,float>(0.812764980897372,29.5048874308936),
		std::pair<float,float>(0.667537722685916,29.2752309540369),
		std::pair<float,float>(0.52520973023791,29.0514342867185),
		std::pair<float,float>(0.385692543689252,28.8332695998426),
		std::pair<float,float>(0.248901315348132,28.620520884728),
		std::pair<float,float>(0.114754625692925,28.4129831902351),
		std::pair<float,float>(0,28.2104619185279),
		std::pair<float,float>(0,28.0127721742608),
		std::pair<float,float>(0,27.8197381625034),
		std::pair<float,float>(0,27.6311926311826),
		std::pair<float,float>(0,27.446976354234),
		std::pair<float,float>(0,27.2669376520237),
		std::pair<float,float>(0,27.0909319459319),
		std::pair<float,float>(0,26.9188213442804),
		std::pair<float,float>(0,26.7504742570528),
		std::pair<float,float>(0,26.5857650370885),
		std::pair<float,float>(0,26.4245736456458),
		std::pair<float,float>(0,26.2667853404156),
		std::pair<float,float>(0,26.1122903842432),
		std::pair<float,float>(0,25.9609837729632),
		std::pair<float,float>(0,25.8127649808974),
		std::pair<float,float>(0,25.6675377226859),
		std::pair<float,float>(0,25.5252097302379),
		std::pair<float,float>(0,25.3856925436893),
		std::pair<float,float>(0,25.2489013153481),
		std::pair<float,float>(0,25.1147546256929),
		std::pair<float,float>(0,24.9831743105639),
		std::pair<float,float>(0,24.8540852987588),
		std::pair<float,float>(0,24.7274154593069),
		std::pair<float,float>(0,24.6030954577514),
		std::pair<float,float>(0,24.4810586208255),
		std::pair<float,float>(0,24.3612408089526),
		std::pair<float,float>(0,24.2435802960464),
		std::pair<float,float>(0,24.1280176561253),
		std::pair<float,float>(0,24.0144956562944),
		std::pair<float,float>(0,23.9029591556788),
		std::pair<float,float>(0,23.7933550099247),
		std::pair<float,float>(0,23.6856319809125),
		std::pair<float,float>(0,23.5797406513519),
		std::pair<float,float>(0,23.4756333439519),
		std::pair<float,float>(0,23.3732640448822),
		std::pair<float,float>(0,23.272588331261),
		std::pair<float,float>(0,23.1735633024228),
		std::pair<float,float>(0,23.0761475147388),
		std::pair<float,float>(0,22.9803009197752),
		std::pair<float,float>(0,22.8859848055922),
		std::pair<float,float>(0,22.7931617409973),
		std::pair<float,float>(0,22.7017955225813),
		std::pair<float,float>(0,22.6118511243744),
		std::pair<float,float>(0,22.5232946499738),
		std::pair<float,float>(0,22.4360932869991),
		std::pair<float,float>(0,22.3502152637474),
		std::pair<float,float>(0,22.2656298079212),
		std::pair<float,float>(0,22.1823071073163),
		std::pair<float,float>(0,22.1002182723611),
		std::pair<float,float>(0,22.0193353004055),
		std::pair<float,float>(0,21.9396310416638),
		std::pair<float,float>(0,21.8610791667251),
		std::pair<float,float>(0,21.7836541355443),
		std::pair<float,float>(0,21.707331167837),
		std::pair<float,float>(0,21.6320862148044),
		std::pair<float,float>(0,21.5578959321182),
		std::pair<float,float>(0,21.4847376541002),
		std::pair<float,float>(0,21.412589369036),
		std::pair<float,float>(0,21.3414296955637),
		std::pair<float,float>(0,21.271237860084),
		std::pair<float,float>(0,21.2019936751405),
		std::pair<float,float>(0,21.1336775187205),
		std::pair<float,float>(0,21.0662703144325),
		std::pair<float,float>(0,20.9997535125156),
		std::pair<float,float>(0,20.9341090716413),
		std::pair<float,float>(0,20.8693194414683),
		std::pair<float,float>(0,20.8053675459157),
		std::pair<float,float>(0,20.7422367671174),
		std::pair<float,float>(0,20.679910930029),
		std::pair<float,float>(0,20.6183742876528),
		std::pair<float,float>(0,20.5576115068545),
		std::pair<float,float>(0,20.4976076547434),
		std::pair<float,float>(0,20.4383481855892),
		std::pair<float,float>(0,20.3798189282518),
		std::pair<float,float>(0,20.3220060741004),
		std::pair<float,float>(0,20.2648961653996),
		std::pair<float,float>(0,20.2084760841417),
		std::pair<float,float>(0,20.1527330413048),
		std::pair<float,float>(0,20.0976545665185),
		std::pair<float,float>(0,20.0432284981187),
		std::pair<float,float>(0,19.9894429735744),
		std::pair<float,float>(0,19.9362864202712),
		std::pair<float,float>(0,19.8837475466341),
		std::pair<float,float>(0,19.8318153335774),
		std::pair<float,float>(0,19.7804790262663),
		std::pair<float,float>(0,19.7297281261765),
		std::pair<float,float>(0,19.6795523834411),
		std::pair<float,float>(0,19.6299417894706),
		std::pair<float,float>(0,19.5808865698363),
		std::pair<float,float>(0,19.5323771774052),
		std::pair<float,float>(0,19.484404285716),
		std::pair<float,float>(0,19.4369587825876),
		std::pair<float,float>(0,19.3900317639487),
		std::pair<float,float>(0,19.3436145278811),
		std::pair<float,float>(0,19.2976985688675),
		std::pair<float,float>(0,19.2522755722352),
		std::pair<float,float>(0,19.2073374087895),
		std::pair<float,float>(0,19.1628761296268),
		std::pair<float,float>(0,19.1188839611227),
		std::pair<float,float>(0,19.075353300087),
		std::pair<float,float>(0,19.0322767090792),
		std::pair<float,float>(0,18.989646911879),
		std::pair<float,float>(0,18.9474567891049),
		std::pair<float,float>(0,18.9056993739756),
		std::pair<float,float>(0,18.8643678482096),
		std::pair<float,float>(0,18.8234555380561),
		std::pair<float,float>(0,18.7829559104537),
		std::pair<float,float>(0,18.7428625693121),
		std::pair<float,float>(0,18.7031692519104),
		std::pair<float,float>(0,18.6638698254109),
		std::pair<float,float>(0,18.6249582834803),
		std::pair<float,float>(0,18.5864287430183),
		std::pair<float,float>(0,18.5482754409863),
		std::pair<float,float>(0,18.510492731335),
		std::pair<float,float>(0,18.4730750820257),
		std::pair<float,float>(0,18.4360170721432),
		std::pair<float,float>(0,18.3993133890962),
		std::pair<float,float>(0,18.3629588259024),
		std::pair<float,float>(0,18.3269482785552),
		std::pair<float,float>(0,18.2912767434696),
		std::pair<float,float>(0,18.2559393150038),
		std::pair<float,float>(0,18.2209311830541),
		std::pair<float,float>(0,18.1862476307215),
		std::pair<float,float>(0,18.1518840320457),
		std::pair<float,float>(0,18.1178358498059),
		std::pair<float,float>(0,18.0840986333855),
		std::pair<float,float>(0,18.0506680166982),
		std::pair<float,float>(0,18.0175397161736),
		std::pair<float,float>(0,17.9847095288012),
		std::pair<float,float>(0,17.9521733302292),
		std::pair<float,float>(0,17.9199270729178),
		std::pair<float,float>(0,17.887966784344),
		std::pair<float,float>(0,17.8562885652576),
		std::pair<float,float>(0,17.8248885879852),
		std::pair<float,float>(0,17.7937630947815),
		std::pair<float,float>(0,17.7629083962264),
		std::pair<float,float>(0,17.7323208696661),
		std::pair<float,float>(0,17.7019969576969),
		std::pair<float,float>(0,17.6719331666906),
		std::pair<float,float>(0,17.6421260653594),
		std::pair<float,float>(0,17.6125722833602),
		std::pair<float,float>(0,17.5832685099362),
		std::pair<float,float>(0,17.5542114925944),
		std::pair<float,float>(0,17.5253980358193),
		std::pair<float,float>(0,17.4968249998201),
		std::pair<float,float>(0,17.468489299311),
		std::pair<float,float>(0,17.4403879023234),
		std::pair<float,float>(0,17.4125178290502),
		std::pair<float,float>(0,17.3848761507188),
		std::pair<float,float>(0,17.3574599884944),
		std::pair<float,float>(0,17.3302665124109),
		std::pair<float,float>(0,17.3032929403303),
		std::pair<float,float>(0,17.2765365369271),
		std::pair<float,float>(0,17.2499946127005),
		std::pair<float,float>(0,17.2236645230104),
		std::pair<float,float>(0,17.1975436671377),
		std::pair<float,float>(0,17.1716294873692),
		std::pair<float,float>(0,17.1459194681047),
		std::pair<float,float>(0,17.1204111349863),
		std::pair<float,float>(0,17.0951020540499),
		std::pair<float,float>(0,17.0699898308972),
		std::pair<float,float>(0,17.0450721098881),
		std::pair<float,float>(0,17.0203465733532),
		std::pair<float,float>(0,16.9958109408257),
		std::pair<float,float>(0,16.9714629682907),
		std::pair<float,float>(0,16.947300447455),
		std::pair<float,float>(0,16.9233212050318),
		std::pair<float,float>(0,16.8995231020449),
		std::pair<float,float>(0,16.8759040331483),
		std::pair<float,float>(0,16.852461925962),
		std::pair<float,float>(0,16.8291947404243),
		std::pair<float,float>(0,16.8061004681587),
		std::pair<float,float>(0,16.783177131856),
		std::pair<float,float>(0,16.7604227846709),
		std::pair<float,float>(0,16.7378355096326),
		std::pair<float,float>(0,16.7154134190691),
		std::pair<float,float>(0,16.6931546540448),
		std::pair<float,float>(0,16.6710573838116),
		std::pair<float,float>(0,16.6491198052714),
		std::pair<float,float>(0,16.6273401424525),
		std::pair<float,float>(0,16.6057166459963),
		std::pair<float,float>(0,16.5842475926572),
		std::pair<float,float>(0,16.5629312848124),
		std::pair<float,float>(0,16.541766049984),
		std::pair<float,float>(0,16.5207502403709),
		std::pair<float,float>(0,16.4998822323916),
		std::pair<float,float>(0,16.4791604262373),
		std::pair<float,float>(0,16.4585832454343),
		std::pair<float,float>(0,16.4381491364169),
		std::pair<float,float>(0,16.4178565681092),
		std::pair<float,float>(0,16.397704031516),
		std::pair<float,float>(0,16.377690039323),
		std::pair<float,float>(0,16.3578131255056),
		std::pair<float,float>(0,16.3380718449459),
		std::pair<float,float>(0,16.3184647730584),
		std::pair<float,float>(0,16.2989905054235),
		std::pair<float,float>(0,16.2796476574287),
		std::pair<float,float>(0,16.2604348639182),
		std::pair<float,float>(0,16.241350778849),
		std::pair<float,float>(0,16.222394074955),
		std::pair<float,float>(0,16.2035634434178),
		std::pair<float,float>(0,16.1848575935448),
		std::pair<float,float>(0,16.1662752524537),
		std::pair<float,float>(0,16.1478151647639),
		std::pair<float,float>(0,16.129476092294),
		std::pair<float,float>(0,16.1112568137659),
		std::pair<float,float>(0,16.093156124515),
		std::pair<float,float>(0,16.0751728362061),
		std::pair<float,float>(0,16.0573057765554),
		std::pair<float,float>(0,16.039553789058),
		std::pair<float,float>(0,16.0219157327214),
		std::pair<float,float>(0,16.0043904818035),
		std::pair<float,float>(0,15.9869769255572),
		std::pair<float,float>(0,15.969673967979),
		std::pair<float,float>(0,15.9524805275632)
	};

public:
	KITTIDataSet(const std::string& folderPath) : DataSet(), folderPath(folderPath) { }
	~KITTIDataSet() {}

	virtual std::string getName() const;

	virtual std::vector<DataSetLabel> getLabels() const;
	virtual std::vector<cv::Mat> getImagesForNumber(int number) const;

	virtual int getNrOfImages() const;

	virtual bool isWithinValidDepthRange(int height, float depthAverage) const;

	virtual std::vector<std::string> getCategories() const;

	virtual std::string getCategory(DataSetLabel* label) const;
};

